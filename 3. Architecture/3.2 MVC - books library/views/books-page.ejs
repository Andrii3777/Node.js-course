<!DOCTYPE html>
<html lang="ru">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="library Sh++">

    <link rel="stylesheet" href="/books-page_files/styles/search.css">
    <link rel="stylesheet" href="/books-page_files/styles/libs.min.css">
    <link rel="stylesheet" href="/books-page_files/styles/style.css">
    <link rel="stylesheet" href="/books-page_files/styles/pagination.css">
    <link rel="stylesheet" href="/books-page_files/styles/loginBtn.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
        crossorigin="anonymous" />
    <link rel="shortcut icon" href="/books-page_files/favicon.ico">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <title>shpp-library</title>
</head>

<body data-gr-c-s-loaded="true" class="">
    <%- include ('header'); -%>

        <!-- Admin Login Button -->
        <button onclick="window.location.href='/admin/api/v<%= apiVersion %>/'" id="loginBtn">
            Login for admin
        </button>

        <!-- Main Content Section -->
        <section id="main" class="main-wrapper library">
            <div class="container">
                <!-- Search Results -->
                <% if (searchTerm) { %>
                    <p id="searchResult">
                        <span class="green-text">
                            <%= booksSearchedNumber %>
                        </span>
                        results has been found in your search
                        <span class="green-text">«<%= searchTerm %>»</span>:
                    </p>
                    <% } %>

                        <!-- Book Items -->
                        <div id="content" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <% for (let i=0; i < books.length; i++) { %>
                                <div data-book-id="<%= books[i].id %>" data-image-id="<%= books[i].imageId %>"
                                    class="book_item col-xs-6 col-sm-3 col-md-2 col-lg-2">
                                    <div class="book">
                                        <a href="/api/v<%= apiVersion %>/book/<%= books[i].id %>">
                                            <img id="imageDisplay<%= books[i].imageId %>" src="" alt="Displayed Image">
                                            <div data-title="<%= books[i].title %>" class="blockI"
                                                style="height: 46px;">
                                                <div data-book-title="<%= books[i].title %>" class="title size_text">
                                                    <%= books[i].title %>
                                                </div>
                                                <div data-book-author="<%= books[i].author %>" class="author">
                                                    <%= books[i].author %>
                                                </div>
                                            </div>
                                        </a>
                                        <a href="/api/v<%= apiVersion %>/book/<%= books[i].id %>">
                                            <button type="button" class="details btn btn-success">Читать</button>
                                        </a>
                                    </div>
                                </div>
                                <% } %>
                        </div>
            </div>

            <!-- Pagination Data and Controls -->
            <div id="paginationData" apiVersion='<%= apiVersion %>' offsetStep='<%= offsetStep %>' offset='<%= offset %>'
                booksNumber='<%= booksNumber %>' booksSearchedNumber='<%= booksSearchedNumber %>'
                searchTerm='<%= searchTerm %>'>
            </div>
            <div id="pagination-container">
                <a id="prevBtn" class="pagination-btn btn disabled">Назад</a>
                <a id="nextBtn" class="pagination-btn btn disabled">Вперед</a>
            </div>
        </section>

        <%- include ('footer'); -%>

            <div class="sweet-overlay" tabindex="-1" style="opacity: -0.02; display: none;"></div>
            <div class="sweet-alert hideSweetAlert" data-custom-class="" data-has-cancel-button="false"
                data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="false"
                data-animation="pop" data-timer="null" style="display: none; margin-top: -169px; opacity: -0.03;">
                <div class="sa-icon sa-error" style="display: block;">
                    <span class="sa-x-mark">
                        <span class="sa-line sa-left"></span>
                        <span class="sa-line sa-right"></span>
                    </span>
                </div>
                <div class="sa-icon sa-warning" style="display: none;">
                    <span class="sa-body"></span>
                    <span class="sa-dot"></span>
                </div>
                <div class="sa-icon sa-info" style="display: none;"></div>
                <div class="sa-icon sa-success" style="display: none;">
                    <span class="sa-line sa-tip"></span>
                    <span class="sa-line sa-long"></span>
                    <div class="sa-placeholder"></div>
                    <div class="sa-fix"></div>
                </div>
                <div class="sa-icon sa-custom" style="display: none;"></div>
                <h2>Ооопс!</h2>
                <p style="display: block;">Ошибка error</p>
                <fieldset>
                    <input type="text" tabindex="3" placeholder="">
                    <div class="sa-input-error"></div>
                </fieldset>
                <div class="sa-error-container">
                    <div class="icon">!</div>
                    <p>Not valid!</p>
                </div>
            </div>

            <!-- Additional Scripts -->
            <script src="/books-page_files/scripts/pagination.js"></script>
            <script src="/books-page_files/scripts/fetchingImages.js"></script>
</body>

</html>